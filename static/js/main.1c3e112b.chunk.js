(this.webpackJsonpprigider=this.webpackJsonpprigider||[]).push([[0],{42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),c=n(21),r=n.n(c),s=(n(42),n(43),n(28),n(2)),o=(n(44),n(45),n(3)),u=(n(46),n(6)),d=n.n(u),l=n(18),j=n.n(l),b=n(8),p=n(4),m=n(0),O=function(e){var t=e.showAccountMenu,n=e.setShowAccountMenu,i=Object(p.d)((function(e){return e.restaurant})),c=Object(a.useState)(!1),r=Object(s.a)(c,2),u=r[0],l=r[1],O=Object(a.useState)(0),h=Object(s.a)(O,2),f=h[0],g=h[1],y=Object(a.useRef)(null),v=Object(a.useRef)(null),x=Object(b.f)(),N=Object(p.c)();return Object(a.useEffect)((function(){g(v.current.clientHeight)}),[]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("input",{type:"file",name:"upload-avatar-input",id:"upload-avatar-input",style:{display:"none"},accept:"image/*",ref:y,onChange:function(e){return function(e){l(!0);var t=new FileReader;t.readAsDataURL(e),t.onloadend=function(e){var t=e.currentTarget.result;d.a.post("https://prigider-be.herokuapp.com/api/upload/avatar",{data:t,username:i.username}).then((function(e){d.a.put("https://prigider-be.herokuapp.com/api/restaurant/".concat(i._id),{avatarUrl:e.data}).then((function(e){N({type:"UPDATE_RESTAURANT",payload:Object(o.a)({},e.data)}),localStorage.setItem("restaurant",JSON.stringify(e.data)),l(!1)}))})).catch((function(e){l(!1),e&&console.error("avatar upload error")}))}}(e.target.files[0])}}),Object(m.jsx)("div",{className:"RestaurantImageButton ".concat(t?"opened":""),onClick:function(){n(!t)},children:Object(m.jsx)("img",{src:i.avatarUrl,alt:"restaurant-avatar"})}),Object(m.jsxs)("div",{className:"AccountMenu ".concat(t?"opened":""),style:{"--menu-height":"-".concat(f,"px"),"--menu-height-10":"-".concat(f+10,"px")},ref:v,children:[Object(m.jsxs)("div",{className:"main-restaurant-avatar",children:[Object(m.jsx)("img",{src:i.avatarUrl,alt:"restaurant-avatar"}),u&&Object(m.jsx)("div",{className:"loading-container",children:Object(m.jsx)(j.a,{type:"spokes",color:"rgb(72, 133, 184)",width:50})}),Object(m.jsx)("div",{className:"upload-back"}),Object(m.jsx)("div",{className:"upload-photo",onMouseUp:function(){y.current.click()},children:Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:Object(m.jsx)("path",{d:"M342.7 144H464v288H48V144h121.3l24-64h125.5l23.9 64zM324.3 32h-131c-20 0-37.9 12.4-44.9 31.1L136 96H48c-26.5 0-48 21.5-48 48v288c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V144c0-26.5-21.5-48-48-48h-88l-14.3-38c-5.8-15.7-20.7-26-37.4-26zM256 408c-66.2 0-120-53.8-120-120s53.8-120 120-120 120 53.8 120 120-53.8 120-120 120zm0-192c-39.7 0-72 32.3-72 72s32.3 72 72 72 72-32.3 72-72-32.3-72-72-72z"})})})]}),Object(m.jsxs)("div",{className:"menu-text",children:[Object(m.jsx)("p",{children:i.restaurantName}),Object(m.jsx)("p",{children:""===i.branch?"main branch":i.branch})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{onClick:function(){N({type:"EDIT_ACCOUNT",payload:!0}),x.push("/register")},children:"Edit account"})}),Object(m.jsx)("hr",{}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{onClick:function(){localStorage.clear(),x.push("/login")},children:"Log out"})})]})]})},h=function(e){var t=e.showAccountMenu,n=e.setShowAccountMenu,a=Object(b.f)(),i=Object(b.g)();return Object(m.jsx)("nav",{className:"Header",children:Object(m.jsxs)("div",{className:"prigider",children:[Object(m.jsxs)("div",{className:"prigider-brand",onClick:function(){localStorage.getItem("restaurant")?a.push("/"):a.push("/login")},children:[Object(m.jsx)("img",{className:"fridge",src:"https://image.flaticon.com/icons/png/512/3134/3134828.png",alt:"prigider logo"}),Object(m.jsxs)("h1",{children:["Prigi",Object(m.jsx)("span",{children:"der"})]})]}),"/login"!==i.pathname&&"/register"!==i.pathname&&Object(m.jsx)(O,{showAccountMenu:t,setShowAccountMenu:n})]})})},f=(n(71),function(){var e=Object(b.f)(),t=Object(b.g)();return Object(m.jsxs)("div",{className:"SideNav",children:[Object(m.jsx)("p",{className:"/"===t.pathname||"/inventory"===t.pathname?"selected":null,onClick:function(){return e.push("/inventory")},children:"inventory"}),Object(m.jsx)("p",{className:"/recipes"===t.pathname?"selected":null,onClick:function(){return e.push("/recipes")},children:"recipes"}),Object(m.jsx)("p",{className:"/basket"===t.pathname?"selected":null,onClick:function(){return e.push("/basket")},children:"basket"})]})}),g=function(e){var t=Object(a.useState)(!1),n=Object(s.a)(t,2),i=n[0],c=n[1];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("header",{children:Object(m.jsx)(h,{showAccountMenu:i,setShowAccountMenu:c})}),Object(m.jsxs)("div",{className:"Layout",onClick:function(){c(!1)},children:[Object(m.jsx)("button",{className:"hamburger",onClick:function(e){e.target.classList.toggle("open"),e.target.parentElement.querySelector(".SideNav").classList.toggle("open")},children:"\u2630"}),Object(m.jsx)(f,{}),e.children]})]})},y=(n(72),n(9)),v=n.n(y),x=n(5),N=n(15),E=(n(74),function(e){var t=e.ingredient,n=Object(p.d)((function(e){return e.restaurant})),i=Object(p.d)((function(e){return e.weightUnits})),c=Object(p.d)((function(e){return e.volumeUnits})),r=Object(p.d)((function(e){return e.ingredients})),o=Object(a.useState)("closed"),u=Object(s.a)(o,2),l=u[0],j=u[1],O=Object(a.useState)(""),h=Object(s.a)(O,2),f=h[0],g=h[1],y=Object(a.useState)(t.displayUnit),E=Object(s.a)(y,2),S=E[0],C=E[1],_=Object(a.useState)(0),w=Object(s.a)(_,2),I=w[0],T=w[1],k=Object(a.useState)("view details"),A=Object(s.a)(k,2),U=A[0],R=A[1],D=Object(a.useState)(""),q=Object(s.a)(D,2),P=q[0],F=q[1],L=Object(a.useState)(t.displayUnit),B=Object(s.a)(L,2),M=B[0],J=B[1],Q=Object(a.useState)(""),G=Object(s.a)(Q,2),K=G[0],z=G[1],H=Object(a.useRef)(null),V=Object(a.useRef)(null),Y=Object(p.c)(),W=Object(b.f)(),$=function(){var e=Object(N.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t);case 2:j("update"),R("cancel"),T(H.current.clientHeight);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){switch(l){case"closed":j("details"),T(V.current.clientHeight),R("hide details");break;case"details":j("closed"),R("view details");break;case"update":j("closed"),R("view details"),g("");break;default:return}};return Object(a.useEffect)((function(){Number(P)<0&&F(0),Number(K)<0&&z(0)}),[P,K]),Object(m.jsxs)("div",{className:"InventoryItem",children:[Object(m.jsxs)("div",{className:"ingredient-button-group",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("button",{className:"increase-inventory-button",onClick:function(){return $("increase")},children:"+"}),Object(m.jsx)("button",{className:"reduce-inventory-button",onClick:function(){return $("reduce")},children:"-"})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("button",{onClick:function(){return function(e){Y({type:"EDIT_INGREDIENT",payload:e}),W.push("/add-ingredient")}(t)},children:"\u270f\ufe0f"}),Object(m.jsx)("button",{onClick:function(){return e=t.name,void(window.confirm("Are you sure you want to delete ".concat(e.toUpperCase(),"?"))&&(d.a.delete("https://prigider-be.herokuapp.com/api/ingredients/".concat(t._id)).then(function(){var e=Object(N.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.map((function(e){return e._id}));case 2:return a=e.sent,e.next=5,a.filter((function(e){return e!==t.data._id}));case 5:a=e.sent,d.a.put("https://prigider-be.herokuapp.com/api/restaurant/".concat(n._id),{ingredients:Object(x.a)(a)}).then(function(){var e=Object(N.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.data;case 2:n=e.sent,Y({type:"UPDATE_RESTAURANT",payload:n}),Y({type:"UPDATE_INGREDIENTS",payload:n.ingredients}),Y({type:"UPDATE_RECIPES",payload:n.recipes}),localStorage.setItem("restaurant",JSON.stringify(n)),localStorage.setItem("ingredients",JSON.stringify(n.ingredients)),localStorage.setItem("recipes",JSON.stringify(n.recipes));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Y({type:"EMPTY_BASKET",payload:"empty"}),alert("".concat(e.toUpperCase()," has been deleted"))));var e},children:"\u274c"})]})]}),Object(m.jsxs)("div",{className:"top-div",children:[Object(m.jsx)("p",{className:"inventory-item-name",children:t.name}),Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"inventory-item-quantity",children:"piece"===S?t.quantity:i.some((function(e){return e.name===S}))?(t.quantity/i.find((function(e){return e.name===S})).conversion).toFixed(3):(t.quantity/c.find((function(e){return e.name===S})).conversion/t.density).toFixed(3)}),Object(m.jsx)("div",{className:"inventory-item-unit",children:Object(m.jsxs)("select",{name:"edit-unit",id:"edit-unit",value:S,onChange:function(e){return C(e.target.value)},children:[Object(m.jsx)("option",{hidden:!0,value:t.displayUnit,children:t.displayUnit}),"piece"===t.displayUnit&&Object(m.jsx)("option",{value:"piece",children:"piece"}),"piece"!==t.displayUnit&&Object(m.jsx)("optgroup",{label:"Weight",children:i.map((function(e){return Object(m.jsx)("option",{value:e.name,children:e.name},"inventoryItem-weight-".concat(e.name))}))}),"piece"!==t.displayUnit&&Object(m.jsx)("optgroup",{label:"Volume",children:c.map((function(e){return Object(m.jsx)("option",{value:e.name,children:e.name},"inventoryItem-volume-".concat(e.name))}))})]})})]})]}),Object(m.jsx)("div",{className:"bottom-div",style:"details"===l?{height:"".concat(I,"px"),visibility:"visible"}:{height:0,visibility:"hidden"},children:Object(m.jsxs)("div",{className:"bottom-div-content",ref:V,children:[Object(m.jsxs)("p",{children:[" Category: ",t.category," "]}),Object(m.jsxs)("p",{children:[" Location: ",t.location," "]}),Object(m.jsxs)("p",{children:[" Total Cost: Php ",t.totalCost.toFixed(2)," "]}),Object(m.jsxs)("p",{children:[" Remarks: ",t.remarks," "]})]})}),Object(m.jsx)("div",{className:"bottom-div update-inventory-div",style:"update"===l?{height:"".concat(I+10,"px"),visibility:"visible"}:{height:0,visibility:"hidden"},children:Object(m.jsxs)("div",{className:"bottom-div-content update-inventory",ref:H,children:[Object(m.jsxs)("div",{className:"input-row",children:[Object(m.jsx)("label",{htmlFor:"update-quantity",children:"quantity:"}),Object(m.jsx)("input",{type:"number",id:"update-quantity",value:P,onChange:function(e){return F(e.target.value)}})]}),Object(m.jsxs)("div",{className:"input-row",children:[Object(m.jsx)("label",{htmlFor:"unit",children:"unit:"}),Object(m.jsx)("select",{name:"unit",id:"unit",value:M,onChange:function(e){return J(e.target.value)},children:"piece"===t.displayUnit?Object(m.jsx)("optgroup",{label:"Piece",children:Object(m.jsx)("option",{value:"piece",children:"piece"})}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("optgroup",{label:"Weight",children:i.map((function(e){return Object(m.jsx)("option",{value:e.name,children:e.name},"update-ingredient-inv-item-weight-".concat(e.name))}))}),Object(m.jsx)("optgroup",{label:"Volume",children:c.map((function(e){return Object(m.jsx)("option",{value:e.name,children:e.name},"update-ingredient-inv-item-volume-".concat(e.name))}))})]})})]}),"increase"===f&&Object(m.jsxs)("div",{className:"input-row",children:[Object(m.jsx)("label",{htmlFor:"update-total-cost",children:"cost:"}),Object(m.jsx)("input",{type:"number",id:"update-total-cost",value:K,onChange:function(e){return z(e.target.value)}})]})]})}),Object(m.jsxs)("div",{className:"bottom-button-group",children:[""!==f&&Object(m.jsx)("button",{className:"proceed-button",style:"reduce"===f&&""!==P||"increase"===f&&""!==P&&""!==K?{backgroundColor:"green",color:"white"}:null,disabled:""===P||""===K&&"increase"===f,onClick:function(){Y({type:"EMPTY_BASKET",payload:"empty"});var e=Number(P);if("piece"!==M&&(e=i.some((function(e){return e.name===M}))?P*i.find((function(e){return e.name===M})).conversion:t.density*(P*c.find((function(e){return e.name===M})).conversion)),"increase"===f)d.a.put("https://prigider-be.herokuapp.com/api/ingredients/".concat(t._id),{quantity:t.quantity+e,totalCost:t.totalCost+Number(K)}).then((function(e){d()("https://prigider-be.herokuapp.com/api/restaurant/".concat(n.username)).then((function(e){Y({type:"UPDATE_INGREDIENTS",payload:Object(x.a)(e.data[0].ingredients)}),localStorage.setItem("ingredients",JSON.stringify(e.data[0].ingredients))}))})).catch((function(e){return console.error(e)})),alert("".concat(t.name.toUpperCase()," has been successfully updated"));else{var a=t.quantity-e;a<0&&(a=0);var r=t.totalCost*e/t.quantity,s=t.totalCost-r;s<0&&(s=0),d.a.put("https://prigider-be.herokuapp.com/api/ingredients/".concat(t._id),{quantity:a,totalCost:s}).then((function(e){d()("https://prigider-be.herokuapp.com/api/restaurant/".concat(n.username)).then((function(e){Y({type:"UPDATE_INGREDIENTS",payload:Object(x.a)(e.data[0].ingredients)}),localStorage.setItem("ingredients",JSON.stringify(e.data[0].ingredients))}))})).catch((function(e){return console.error(e)})),alert("".concat(t.name.toUpperCase()," has been successfully updated"))}X()},children:"proceed"}),Object(m.jsx)("button",{className:"cancel-button",onClick:X,style:""!==f?{backgroundColor:"red",color:"white"}:null,children:U})]})]})}),S=function(){var e=Object(p.d)((function(e){return e.ingredients})),t=Object(a.useState)(e),n=Object(s.a)(t,2),i=n[0],c=n[1],r=Object(a.useState)(i),o=Object(s.a)(r,2),u=o[0],d=o[1],l=Object(b.f)(),j=Object(p.c)();return Object(a.useEffect)((function(){e&&c(e)}),[e]),Object(a.useEffect)((function(){d(i)}),[i]),Object(m.jsxs)("div",{className:"InventoryList",children:[Object(m.jsx)("button",{onClick:function(){j({type:"CLEAR_INGREDIENT_EDIT"}),l.push("/add-ingredient")},children:"add ingredient"}),Object(m.jsxs)("div",{className:"search-bar",children:[Object(m.jsx)("div",{className:"search-input-container",children:Object(m.jsx)("input",{type:"text",onChange:function(e){return function(e){var t=e.trim().toLowerCase();if(""===t)return d(i);var n=i.filter((function(e){return-1!==e.name.indexOf(t)}));d(n)}(e.target.value)}})}),Object(m.jsx)("div",{className:"search-icon",children:Object(m.jsx)("svg",{focusable:"false",viewBox:"0 0 24 24",children:Object(m.jsx)("path",{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})})})]}),Object(m.jsx)("div",{className:"inventory-list-container",children:u?u.map((function(e){return Object(m.jsx)(E,{ingredient:e},"inventory-item-".concat(e._id))})):null})]})},C=(n(75),n(76),n(12)),_=function(e){var t=e.recipe,n=e.notEnough,i=e.notInBasket,c=e.basketCounter,r=Object(p.d)((function(e){return e.recipes})),o=Object(p.d)((function(e){return e.restaurant})),u=Object(p.d)((function(e){return e.ingredients})),l=Object(a.useState)(u),j=Object(s.a)(l,2),b=j[0],O=j[1],h=Object(p.c)();return Object(a.useEffect)((function(){u&&O(u)}),[u]),Object(m.jsxs)("div",{className:"RecipeBox",style:n?{backgroundColor:"silver"}:null,children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"recipe-name",children:t.name}),Object(m.jsx)("p",{className:"ingredient-title",children:"Ingredients:"}),Object(m.jsx)("ol",{children:t.recipeIngredients.map((function(e){var t=b.find((function(t){return t._id===e.ingredient._id})),n=void 0===t?{color:"red"}:e.quantity<=t.quantity?null:{color:"red"};return Object(m.jsxs)("li",{style:n,children:[t?null:Object(m.jsx)("span",{className:"warning bg-warning","data-toggle":"tooltip","data-placement":"right",title:"This ingredient doesn't exist on your database.",children:"!"}),Object(m.jsx)("span",{children:e.ingredient&&e.ingredient.name}),Object(m.jsxs)("span",{children:[e.quantity," ",e.displayUnit]})]},"".concat(e._id,"-$ingredientGroup"))}))})]}),Object(m.jsxs)("div",{className:"button-group",children:[Object(m.jsx)(C.b,{to:"/add-recipe",children:Object(m.jsx)("button",{onClick:function(){return function(e){h({type:"EDIT_RECIPE",payload:e})}(t)},children:"\u270f\ufe0f"})}),Object(m.jsx)("button",{onClick:function(){return e=t.name,void(window.confirm("Are you sure you want to delete ".concat(e.toUpperCase(),"?"))&&(d.a.delete("https://prigider-be.herokuapp.com/api/recipe/".concat(t._id)).then(function(){var e=Object(N.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.map((function(e){return e._id}));case 2:return n=e.sent,e.next=5,n.filter((function(e){return e!==t.data._id}));case 5:n=e.sent,d.a.put("https://prigider-be.herokuapp.com/api/restaurant/".concat(o._id),{recipes:Object(x.a)(n)}).then((function(e){d()("https://prigider-be.herokuapp.com/api/restaurant/".concat(o.username)).then((function(e){h({type:"UPDATE_RESTAURANT",payload:e.data[0]}),h({type:"UPDATE_RECIPES",payload:e.data[0].recipes}),h({type:"UPDATE_INGREDIENTS",payload:e.data[0].ingredients}),localStorage.setItem("restaurant",JSON.stringify(e.data[0])),localStorage.setItem("recipes",JSON.stringify(e.data[0].recipes)),localStorage.setItem("ingredients",JSON.stringify(e.data[0].ingredients))}))}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h({type:"EMPTY_BASKET",payload:"empty"}),alert("".concat(e.toUpperCase()," has been deleted"))));var e},children:"\u274c"})]}),Object(m.jsxs)("div",{className:"basket-button-group",children:[Object(m.jsx)("button",{onClick:function(){return function(e){h({type:"SUBTRACT_TO_BASKET",payload:e})}(t)},disabled:i,children:"-"}),Object(m.jsx)("span",{children:c}),Object(m.jsx)("button",{onClick:function(){return function(e){h({type:"ADD_TO_BASKET",payload:e})}(t)},disabled:n,children:"+"})]})]})},w=function(){var e=Object(p.d)((function(e){return e.basket})),t=Object(p.d)((function(e){return e.recipes})),n=Object(p.d)((function(e){return e.ingredients})),i=Object(a.useState)(t),c=Object(s.a)(i,2),r=c[0],o=c[1],u=Object(a.useState)(r),d=Object(s.a)(u,2),l=d[0],j=d[1],O=Object(a.useState)(1),h=Object(s.a)(O,2),f=h[0],g=h[1],y=Object(a.useState)(n),v=Object(s.a)(y,2),N=v[0],E=v[1],S=Object(a.useState)([]),C=Object(s.a)(S,2),w=C[0],I=C[1],T=Object(b.f)();return Object(a.useEffect)((function(){t&&o(t)}),[t]),Object(a.useEffect)((function(){j(r)}),[r]),Object(a.useEffect)((function(){n&&E(n)}),[n]),Object(a.useEffect)((function(){var t=l.map((function(e){var t=!1;return e.recipeIngredients.forEach((function(e){var n=N.find((function(t){return t.name===e.name}));(void 0===n||n.quantity<e.quantity)&&(t=!0)})),t?null:e}));t=t.filter((function(e){return null!==e}));var n=l.map((function(t){var n=!1,a=!0;return t.recipeIngredients.forEach((function(e){var t=N.find((function(t){return t.name===e.name}));(void 0===t||t.quantity<e.quantity)&&(n=!0)})),e.forEach((function(e){if(t._id===e._id)return a=!1})),n&&a?null:t}));switch(n=n.filter((function(e){return null!==e})),f){case 1:return I(Object(x.a)(l));case 2:return I(Object(x.a)(n));case 3:return I(Object(x.a)(t));default:return I(Object(x.a)(l))}}),[f,r,N,e,l]),Object(m.jsxs)("div",{className:"RecipesList",children:[Object(m.jsx)("button",{onClick:function(){T.push("/add-recipe")},children:"add recipe"}),Object(m.jsxs)("div",{className:"search-bar",children:[Object(m.jsx)("div",{className:"search-input-container",children:Object(m.jsx)("input",{type:"text",onChange:function(e){return function(e){var t=e.trim().toLowerCase();if(""===t)return j(r);var n=r.filter((function(e){return-1!==e.name.indexOf(t)}));j(n)}(e.target.value)}})}),Object(m.jsx)("div",{className:"search-icon",children:Object(m.jsx)("svg",{focusable:"false",viewBox:"0 0 24 24",children:Object(m.jsx)("path",{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})})})]}),Object(m.jsxs)("div",{className:"recipes-main-container",children:[Object(m.jsxs)("div",{className:"recipes-filter",children:[Object(m.jsx)("input",{type:"radio",name:"filter-recipe-display",id:"show-all",onClick:function(){return g(1)},defaultChecked:!0}),Object(m.jsx)("label",{htmlFor:"show-all",children:"show all"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{type:"radio",name:"filter-recipe-display",id:"hide-some",onClick:function(){return g(2)}}),Object(m.jsx)("label",{htmlFor:"hide-some",children:"hide some"}),Object(m.jsx)("br",{}),Object(m.jsx)("input",{type:"radio",name:"filter-recipe-display",id:"hide-all",onClick:function(){return g(3)}}),Object(m.jsx)("label",{htmlFor:"hide-all",children:"hide all"})]}),Object(m.jsx)("div",{className:"recipes-container",children:w.map((function(t){var n=!1,a=!0;t.recipeIngredients.forEach((function(e){if(null===e.ingredient)return n=!0;var t=N.find((function(t){return t.name===e.ingredient.name}));(void 0===t||t.quantity<e.quantity)&&(n=!0)})),e.forEach((function(e){if(t._id===e._id)return a=!1}));var i=e.find((function(e){return e.name===t.name}));return i=void 0===i?0:i.itemQuantity,Object(m.jsx)(_,{recipe:t,notEnough:n,notInBasket:a,basketCounter:i},"recipe-list-".concat(t.name))}))})]})]})},I=(n(77),n(78),function(e){var t=e.item,n=e.notEnough,i=Object(a.useState)(0),c=Object(s.a)(i,2),r=c[0],o=c[1],u=Object(a.useState)(!1),d=Object(s.a)(u,2),l=d[0],j=d[1],b=Object(a.useState)(0),O=Object(s.a)(b,2),h=O[0],f=O[1],g=Object(a.useRef)(null),y=Object(p.c)();return Object(a.useEffect)((function(){var e=0;t.recipeIngredients.forEach((function(t){return e+=t.ingredient.totalCost})),o(e)}),[t.recipeIngredients]),Object(m.jsxs)("div",{className:"BasketItem",children:[Object(m.jsxs)("div",{className:"top-div",children:[Object(m.jsx)("p",{className:"basket-item-name",children:t.name}),Object(m.jsxs)("div",{className:"basket-item-buttons",children:["Quantity:",Object(m.jsx)("button",{className:"quantity-button",onClick:function(){return function(e){1!==e.itemQuantity&&y({type:"SUBTRACT_TO_BASKET",payload:e})}(t)},disabled:t.itemQuantity<=1,children:"-"}),Object(m.jsx)("span",{children:t.itemQuantity}),Object(m.jsx)("button",{className:"quantity-button",onClick:function(){return function(e){y({type:"ADD_TO_BASKET",payload:e})}(t)},disabled:n,children:"+"}),Object(m.jsx)("button",{className:"delete-button",onClick:function(){return function(e){y({type:"DELETE_FROM_BASKET",payload:e})}(t)},children:"\u274c"})]})]}),Object(m.jsx)("div",{className:"bottom-div",style:{height:"".concat(h,"px")},children:Object(m.jsxs)("div",{className:"bottom-div-content",ref:g,children:[Object(m.jsxs)("p",{children:["Category: ",t.category]}),Object(m.jsxs)("p",{children:["Details: ",t.details]}),Object(m.jsxs)("p",{children:["Cost Per Item: Php ",r.toFixed(2)]}),Object(m.jsxs)("p",{children:["Total Cost: Php ",(r*t.itemQuantity).toFixed(2)]})]})}),Object(m.jsxs)("button",{className:"view-button",onClick:function(){l?(j(!1),f(0)):(j(!0),f(g.current.clientHeight))},children:[l?"hide":"view"," details"]})]})}),T=function(){var e=Object(p.d)((function(e){return e.basket})),t=Object(p.d)((function(e){return e.restaurant})),n=Object(p.d)((function(e){return e.ingredients})),a=Object(p.c)();return Object(m.jsxs)("div",{className:"Basket",children:[Object(m.jsx)("button",{className:"btn btn-success confirm-button",onClick:function(){if(window.confirm("Do you want to update your inventory with these recipes?")){var i=[];e.forEach((function(e){e.recipeIngredients.forEach((function(t){void 0===i.find((function(e){return e._id===t.ingredient._id}))?i.push({_id:t.ingredient._id,quantity:e.itemQuantity*t.quantity,name:t.ingredient.name}):i=i.map((function(n){return n._id===t.ingredient._id?Object(o.a)(Object(o.a)({},n),{},{quantity:n.quantity+e.itemQuantity*t.quantity}):n}))}))}));var c=i.map((function(e){var t=n.find((function(t){return t._id===e._id})).quantity,a=t*n.find((function(t){return t._id===e._id})).totalCost/(e.quantity+t);return Object(o.a)(Object(o.a)({},e),{},{quantity:t,totalCost:a})}));(function(){var e=Object(N.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.forEach((function(e){d.a.put("https://prigider-be.herokuapp.com/api/ingredients/".concat(e._id),{quantity:e.quantity,totalCost:e.totalCost})}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(){d()("https://prigider-be.herokuapp.com/api/restaurant/".concat(t.username)).then((function(e){a({type:"UPDATE_INGREDIENTS",payload:e.data[0].ingredients}),localStorage.setItem("ingredients",JSON.stringify(e.data[0].ingredients))}))})).then((function(){a({type:"EMPTY_BASKET",payload:"confirm"}),alert("Inventory updated")}))}},disabled:0===e.length&&!0,children:"confirm"}),Object(m.jsx)("button",{className:"btn btn-danger empty-button",onClick:function(){window.confirm("Are you sure you want to empty the basket?")&&(a({type:"EMPTY_BASKET",payload:"empty"}),alert("Basket emptied"))},disabled:0===e.length&&!0,children:"empty"}),Object(m.jsx)("div",{className:"basket-item-container",children:e.map((function(e){var t=!1;return e.recipeIngredients.forEach((function(e){var a=n.find((function(t){return t.name===e.ingredient.name}));(void 0===a||a.quantity<e.quantity)&&(t=!0)})),Object(m.jsx)(I,{item:e,notEnough:t},"basket-item-".concat(e._id))}))})]})},k=(n(79),Object(p.b)((function(e){return{ingredients:e.ingredients,ingredientToEdit:e.ingredientToEdit,ingredientIsEdit:e.ingredientIsEdit,weightUnits:e.weightUnits,volumeUnits:e.volumeUnits}}))((function(e){var t=e.ingredients,n=e.ingredientToEdit,i=e.ingredientIsEdit,c=e.weightUnits,r=e.volumeUnits,o=Object(p.d)((function(e){return e.restaurant})),u=Object(a.useState)(""),l=Object(s.a)(u,2),j=l[0],b=l[1],O=Object(a.useState)(1),h=Object(s.a)(O,2),f=h[0],g=h[1],y=Object(a.useState)(""),E=Object(s.a)(y,2),S=E[0],C=E[1],_=Object(a.useState)(0),w=Object(s.a)(_,2),I=w[0],T=w[1],k=Object(a.useState)(""),A=Object(s.a)(k,2),U=A[0],R=A[1],D=Object(a.useState)(""),q=Object(s.a)(D,2),P=q[0],F=q[1],L=Object(a.useState)(""),B=Object(s.a)(L,2),M=B[0],J=B[1],Q=Object(a.useState)(0),G=Object(s.a)(Q,2),K=G[0],z=G[1],H=Object(a.useState)(""),V=Object(s.a)(H,2),Y=V[0],W=V[1],$=Object(a.useState)("gram"),X=Object(s.a)($,2),Z=X[0],ee=X[1],te=Object(p.c)(),ne=t.map((function(e){return e.category}));ne=Object(x.a)(new Set(ne));var ae=t.map((function(e){return e.location}));ae=Object(x.a)(new Set(ae));return Object(a.useEffect)((function(){b(n.name),T(n.quantity),ee(n.displayUnit),g(n.density),C(n.remarks),z(n.totalCost),R(n.category),F(n.location),W(n._id)}),[n]),Object(a.useEffect)((function(){document.querySelector("#density").disabled="piece"===Z}),[Z]),Object(m.jsxs)("div",{className:"AddIngredient",children:[Object(m.jsxs)("h2",{className:"title",children:[i?"Edit":"Add"," Ingredient"]}),Object(m.jsxs)("div",{className:"form-container",children:[Object(m.jsxs)("div",{className:"form-row",children:[Object(m.jsx)("label",{htmlFor:"name",children:"Name:"}),Object(m.jsx)("input",{type:"text",id:"name",value:j,onChange:function(e){return b(e.target.value)}})]}),Object(m.jsxs)("div",{className:"form-row",children:[Object(m.jsx)("label",{htmlFor:"quantity",children:"Quantity:"}),Object(m.jsx)("input",{type:"number",id:"quantity",value:I,onChange:function(e){return T(Number(e.target.value))}})]}),Object(m.jsxs)("div",{className:"form-row",children:[Object(m.jsx)("label",{htmlFor:"unit",children:"Unit:"}),Object(m.jsxs)("select",{name:"unit",id:"unit",value:Z,onChange:function(e){return ee(e.target.value)},children:[Object(m.jsx)("optgroup",{label:"Piece",children:Object(m.jsx)("option",{value:"piece",children:"piece"})}),Object(m.jsx)("optgroup",{label:"Weight",children:c.map((function(e){return Object(m.jsx)("option",{value:e.name,children:e.name},"addIngredient-weight-".concat(e.name))}))}),Object(m.jsx)("optgroup",{label:"Volume",children:r.map((function(e){return Object(m.jsx)("option",{value:e.name,children:e.name},"addIngredient-volume-".concat(e.name))}))})]})]}),Object(m.jsxs)("div",{className:"form-row",children:[Object(m.jsx)("label",{htmlFor:"density",children:"Density:"}),Object(m.jsx)("input",{type:"number",id:"density",step:"0.001",value:f,onChange:function(e){return g(Number(e.target.value))}})]}),Object(m.jsxs)("div",{className:"form-row",children:[Object(m.jsx)("label",{htmlFor:"total-cost",children:"Total Cost:"}),Object(m.jsx)("input",{type:"number",id:"total-cost",value:K,onChange:function(e){return z(Number(e.target.value))}})]}),Object(m.jsxs)("div",{className:"form-row",children:[Object(m.jsx)("label",{htmlFor:"category",children:"Category:"}),Object(m.jsx)("input",{type:"text",list:"categories",id:"category",value:U,onChange:function(e){return R(e.target.value)}}),Object(m.jsx)("datalist",{id:"categories",children:ne.map((function(e){return Object(m.jsx)("option",{value:e},"ingredient-category-".concat(e))}))})]}),Object(m.jsxs)("div",{className:"form-row",children:[Object(m.jsx)("label",{htmlFor:"location",children:"Location:"}),Object(m.jsx)("input",{type:"text",list:"locations",id:"location",value:P,onChange:function(e){return F(e.target.value)}}),Object(m.jsx)("datalist",{id:"locations",children:ae.map((function(e){return Object(m.jsx)("option",{value:e},"ingredient-location-".concat(e))}))})]}),Object(m.jsxs)("div",{className:"form-row",children:[Object(m.jsx)("label",{htmlFor:"remarks",children:"Remarks:"}),Object(m.jsx)("textarea",{name:"remarks",id:"remarks",cols:"30",rows:"10",value:S,onChange:function(e){return C(e.target.value)}})]}),Object(m.jsx)("p",{className:"error-msg",children:M}),Object(m.jsxs)("div",{className:"form-row",children:[Object(m.jsx)("div",{}),Object(m.jsx)("button",{className:"btn btn-primary",onClick:function(){if(J(""),""===j.trim())J("Name must not be empty");else if(t.some((function(e){return e.name===j.trim().toLowerCase()&&!1===i})))J("The ingredient already exists");else if(I<0)J("Quantity must not be zero or less");else if(I%1!==0&&"piece"===Z)J("Quantity must be a whole number when unit is PIECE");else if(f<.001&&"piece"!==Z)J("Density must not be less than 0.001");else{var e;"piece"!==Z&&(e=c.some((function(e){return e.name===Z}))?I*c.find((function(e){return e.name===Z})).conversion:f*(I*r.find((function(e){return e.name===Z})).conversion)),!1===i?d.a.post("https://prigider-be.herokuapp.com/api/ingredients",{name:j.trim().toLowerCase(),quantity:e,displayUnit:Z,density:"piece"===Z?null:f,remarks:S,totalCost:K,category:U.trim().toLowerCase(),location:P.trim().toLowerCase()}).then(function(){var e=Object(N.a)(v.a.mark((function e(n){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.map((function(e){return e._id}));case 2:a=e.sent,d.a.put("https://prigider-be.herokuapp.com/api/restaurant/".concat(o._id),{ingredients:[].concat(Object(x.a)(a),[n.data._id])}).then((function(e){te({type:"UPDATE_RESTAURANT",payload:e.data}),te({type:"UPDATE_INGREDIENTS",payload:e.data.ingredients}),localStorage.setItem("restaurant",JSON.stringify(e.data)),localStorage.setItem("ingredients",JSON.stringify(e.data.ingredients))}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):d.a.put("https://prigider-be.herokuapp.com/api/ingredients/".concat(Y),{name:j.trim().toLowerCase(),quantity:e,displayUnit:Z,density:"piece"===Z?null:f,remarks:S,totalCost:K,category:U.trim().toLowerCase(),location:P.trim().toLowerCase()}).then((function(e){te({type:"CONFIRM_EDIT_INGREDIENT",payload:e.data})})),b(""),T(0),ee("gram"),g(1),C(""),z(0),R(""),F(""),W(""),J(""),alert("Ingredient ".concat(j.trim().toUpperCase()," has been added to the inventory"))}},children:"submit"})]})]})]})}))),A=(n(80),Object(p.b)((function(e){return{recipeToEdit:e.recipeToEdit,recipeIsEdit:e.recipeIsEdit,weightUnits:e.weightUnits,volumeUnits:e.volumeUnits}}))((function(e){var t=e.recipeToEdit,n=e.recipeIsEdit,i=e.weightUnits,c=e.volumeUnits,r=Object(p.d)((function(e){return e.restaurant})),u=Object(p.d)((function(e){return e.recipes})),l=Object(p.d)((function(e){return e.ingredients})),j=Object(a.useState)(""),b=Object(s.a)(j,2),O=b[0],h=b[1],f=Object(a.useState)(""),g=Object(s.a)(f,2),y=g[0],E=g[1],S=Object(a.useState)(""),C=Object(s.a)(S,2),_=C[0],w=C[1],I=Object(a.useState)(""),T=Object(s.a)(I,2),k=T[0],A=T[1],U=Object(a.useState)([]),R=Object(s.a)(U,2),D=R[0],q=R[1],P=Object(a.useState)(u),F=Object(s.a)(P,2),L=F[0],B=F[1],M=Object(a.useState)([]),J=Object(s.a)(M,2),Q=J[0],G=J[1],K=Object(a.useState)(),z=Object(s.a)(K,2),H=z[0],V=z[1],Y=Object(a.useState)(""),W=Object(s.a)(Y,2),$=W[0],X=W[1],Z=Object(a.useState)(""),ee=Object(s.a)(Z,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(""),ie=Object(s.a)(ae,2),ce=ie[0],re=ie[1],se=Object(a.useState)(""),oe=Object(s.a)(se,2),ue=oe[0],de=oe[1],le=L.map((function(e){return e.category}));le=Object(x.a)(new Set(le));var je=Object(p.c)();return Object(a.useEffect)((function(){h(t.name),E(t.details),w(t.category),G(t.recipeIngredients),A(t._id)}),[t,n]),Object(a.useEffect)((function(){var e=D.filter((function(e){return"piece"===e.displayUnit}));H&&(e.some((function(e){return e._id===H._id}))?(ne("piece"),document.querySelector("#ingredient-unit").disabled=!0):(ne("gram"),document.querySelector("#ingredient-unit").disabled=!1))}),[H,D]),Object(a.useEffect)((function(){u&&B(u)}),[u]),Object(a.useEffect)((function(){l&&q(l)}),[l]),Object(m.jsxs)("div",{className:"AddRecipe",children:[Object(m.jsxs)("h2",{className:"title",children:[n?"Edit":"Add"," Recipe"]}),Object(m.jsxs)("div",{className:"form-container",children:[Object(m.jsxs)("div",{className:"form-row",children:[Object(m.jsx)("label",{htmlFor:"name",children:"Name:"}),Object(m.jsx)("input",{className:"input-padding",type:"text",id:"name",value:O,onChange:function(e){return h(e.target.value)}})]}),Object(m.jsxs)("div",{className:"form-row",children:[Object(m.jsx)("label",{htmlFor:"category",children:"Category:"}),Object(m.jsx)("input",{className:"input-padding",type:"text",list:"recipe-categories",id:"category",value:_,onChange:function(e){return w(e.target.value)}}),Object(m.jsx)("datalist",{id:"recipe-categories",children:le.map((function(e){return Object(m.jsx)("option",{value:e},"recipe-category-".concat(e))}))})]}),Object(m.jsxs)("div",{className:"form-row",children:[Object(m.jsx)("label",{htmlFor:"details",children:"Details:"}),Object(m.jsx)("textarea",{className:"input-padding",name:"details",id:"details",cols:"30",rows:"10",value:y,onChange:function(e){return E(e.target.value)}})]}),Object(m.jsxs)("div",{className:"ingredient-display-container",children:[Object(m.jsx)("div",{className:"ingredients-title",children:"Ingredients:"}),0===Q.length&&Object(m.jsx)("div",{className:"no-ingredients",children:"No ingredients added yet"}),Q.map((function(e){return Object(m.jsxs)("p",{className:"ingredient-added",children:[Object(m.jsx)("span",{children:e.ingredient.name}),Object(m.jsxs)("span",{children:["- ",e.quantity," ",e.displayUnit,e.quantity>1&&"s"]}),Object(m.jsx)("button",{className:"btn btn-danger",onClick:function(e){var t=Object(x.a)(document.querySelectorAll(".ingredient-added")).findIndex((function(t){return t===e.target.parentElement}));G(Q.filter((function(e,n){return n!==t})))},children:"x"})]},"".concat(e.ingredient.name,"-to-add-ingredient"))}))]}),Object(m.jsxs)("div",{className:"ingredients-input",children:[Object(m.jsxs)("div",{className:"form-row",children:[Object(m.jsx)("label",{htmlFor:"ingredient-name",children:"Ingredient Name:"}),Object(m.jsxs)("select",{name:"ingredient-name",id:"ingredient-name",onChange:function(e){return t=e.target.value,void V(D.find((function(e){return e._id===t})));var t},children:[Object(m.jsx)("option",{value:"",hidden:!0,children:"select ingredient"}),D.map((function(e){return Object(m.jsx)("option",{value:e._id,children:e.name},"ingredient-option-".concat(e._id))}))]})]}),Object(m.jsxs)("div",{className:"form-row",children:[Object(m.jsx)("label",{htmlFor:"ingredient-quantity",children:"Quantity:"}),Object(m.jsxs)("div",{children:[Object(m.jsx)("input",{type:"number",id:"ingredient-quantity",value:$,onChange:function(e){return X(e.target.value)}}),Object(m.jsxs)("select",{name:"ingredient-unit",id:"ingredient-unit",value:te,onChange:function(e){return ne(e.target.value)},children:[Object(m.jsx)("option",{value:"piece",hidden:!0,children:"piece"}),Object(m.jsx)("optgroup",{label:"Weight",children:i.map((function(e){return Object(m.jsx)("option",{value:e.name,children:e.name},"addRecipe-weight-".concat(e.name))}))}),Object(m.jsx)("optgroup",{label:"Volume",children:c.map((function(e){return Object(m.jsx)("option",{value:e.name,children:e.name},"addRecipe-volume-".concat(e.name))}))})]})]})]}),Object(m.jsx)("p",{className:"error-msg",style:""===ue?{display:"none"}:null,children:ue}),Object(m.jsx)("button",{className:"btn btn-success",onClick:function(){re(""),de(""),void 0===H?de("Please select an ingredient"):Q.some((function(e){return e.ingredient._id===H._id}))?de("The ingredient already exists"):$<.001?de("Quantity must not be zero or a negative number"):$%1!==0&&"piece"===te?de("Quantity must be a whole number when unit is PIECE"):(G([].concat(Object(x.a)(Q),[{ingredient:H,quantity:Number($),displayUnit:te.trim().toLowerCase()}])),de(""))},children:"add ingredient"})]}),Object(m.jsx)("p",{className:"error-msg",children:ce}),Object(m.jsxs)("div",{className:"form-row",children:[Object(m.jsx)("div",{}),Object(m.jsx)("button",{className:"btn btn-primary submit-button",onClick:function(){if(re(""),de(""),""===O.trim())re("Name must not be empty");else if(L.some((function(e){return e.name===O.trim().toLowerCase()}))&&!1===n)re("The recipe already exists");else if(0===Q.length)re("There should be at least one ingredient");else{var e=Q.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{ingredient:e.ingredient._id})}));!1===n?d.a.post("https://prigider-be.herokuapp.com/api/recipe",{name:O.trim().toLowerCase(),details:y,category:_.trim().toLowerCase(),recipeIngredients:e}).then(function(){var e=Object(N.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.map((function(e){return e._id}));case 2:n=e.sent,d.a.put("https://prigider-be.herokuapp.com/api/restaurant/".concat(r._id),{recipes:[].concat(Object(x.a)(n),[t.data._id])}).then((function(e){je({type:"UPDATE_RESTAURANT",payload:Object(o.a)({},e.data)}),je({type:"UPDATE_RECIPES",payload:Object(x.a)(e.data.recipes)}),localStorage.setItem("restaurant",JSON.stringify(e.data)),localStorage.setItem("recipes",JSON.stringify(e.data.recipes))}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):d.a.put("https://prigider-be.herokuapp.com/api/recipe/".concat(k),{name:O.trim().toLowerCase(),details:y,category:_.trim().toLowerCase(),recipeIngredients:e}).then((function(e){je({type:"CONFIRM_EDIT_RECIPE",payload:e.data});var t=JSON.parse(localStorage.getItem("recipes"));t=t.map((function(t){return t._id===e.data._id?e.data:t})),localStorage.setItem("recipes",JSON.stringify(t))})),h(""),E(""),w(""),G([]),V(),X(""),ne(""),re(""),de(""),alert("Recipe ".concat(O.trim().toUpperCase()," has been added to the recipe list"))}},children:"submit"})]})]})]})}))),U=(n(81),function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],i=t[1],c=Object(a.useState)(""),r=Object(s.a)(c,2),o=r[0],u=r[1],l=Object(a.useState)(!1),O=Object(s.a)(l,2),f=O[0],g=O[1],y=Object(a.useState)(""),v=Object(s.a)(y,2),x=v[0],N=v[1],E=Object(a.useState)(!1),S=Object(s.a)(E,2),C=S[0],_=S[1],w=Object(a.useRef)(null),I=Object(a.useRef)(null),T=Object(b.f)(),k=Object(p.c)(),A=function(){return N(""),""===n.trim()?(w.current.focus(),N("Enter an email address")):""===o.trim()?(I.current.focus(),N("Enter a password")):(g(!0),void d()("https://prigider-be.herokuapp.com/api/restaurant/".concat(n)).then((function(e){return void 0===e.data[0]?(g(!1),w.current.focus(),N("Username is not registered")):e.data[0].password!==o?(g(!1),I.current.focus(),N("Password does not match with the username")):(k({type:"UPDATE_RESTAURANT",payload:e.data[0]}),k({type:"UPDATE_INGREDIENTS",payload:e.data[0].ingredients}),k({type:"UPDATE_RECIPES",payload:e.data[0].recipes}),localStorage.setItem("restaurant",JSON.stringify(e.data[0])),localStorage.setItem("ingredients",JSON.stringify(e.data[0].ingredients)),localStorage.setItem("recipes",JSON.stringify(e.data[0].recipes)),g(!1),void T.push("/"))})).catch((function(){g(!1)})))};return Object(m.jsxs)("div",{className:"LoginPage",children:[f&&Object(m.jsx)("div",{className:"loading-container",children:Object(m.jsx)(j.a,{type:"spokes",color:"rgb(72, 133, 184)",width:50})}),Object(m.jsx)(h,{}),Object(m.jsxs)("div",{className:"login-page-container",children:[Object(m.jsxs)("div",{className:"login-box",children:[Object(m.jsx)("p",{className:"login-title",children:"Sign in to your account"}),Object(m.jsx)("div",{className:"login-error",children:Object(m.jsx)("small",{children:x})}),Object(m.jsx)("input",{type:"username",name:"username-login",id:"username-login",placeholder:"Username",value:n,onChange:function(e){i(e.target.value)},ref:w,onKeyDown:function(e){return"Enter"===e.key?I.current.focus():null}}),Object(m.jsx)("input",{type:"password",name:"password-login",id:"password-login",placeholder:"Password",value:o,onChange:function(e){u(e.target.value)},ref:I,onKeyDown:function(e){return"Enter"===e.key?A():null}}),Object(m.jsxs)("div",{className:"show-hide-password",onClick:function(){"password"===I.current.type?I.current.type="text":I.current.type="password",_(!C)},children:[C?"Hide":"Show"," password"]}),Object(m.jsx)("button",{className:"login-button",onClick:A,children:"Log In"})]}),Object(m.jsxs)("p",{className:"register-message",children:["Don't have an account?\xa0",Object(m.jsx)("span",{className:"link-hover",onClick:function(){k({type:"EDIT_ACCOUNT",payload:!1}),T.push("/register")},children:"Register here"})]})]})]})}),R=(n(82),function(){var e=Object(p.d)((function(e){return e.restaurant})),t=Object(p.d)((function(e){return e.editAccount})),n=Object(a.useState)(""),i=Object(s.a)(n,2),c=i[0],r=i[1],o=Object(a.useState)(""),u=Object(s.a)(o,2),l=u[0],O=u[1],f=Object(a.useState)(""),g=Object(s.a)(f,2),y=g[0],v=g[1],x=Object(a.useState)(!1),N=Object(s.a)(x,2),E=N[0],S=N[1],C=Object(a.useState)(""),_=Object(s.a)(C,2),w=_[0],I=_[1],T=Object(a.useState)(""),k=Object(s.a)(T,2),A=k[0],U=k[1],R=Object(b.f)(),D=Object(p.c)();return Object(a.useEffect)((function(){t&&(O(e.username),v(e.password),I(e.restaurantName),r(e.branch))}),[e,t]),Object(m.jsxs)("div",{className:"RegistrationPage",children:[E&&Object(m.jsx)("div",{className:"loading-container",children:Object(m.jsx)(j.a,{type:"spokes",color:"rgb(72, 133, 184)",width:50})}),Object(m.jsx)(h,{}),Object(m.jsxs)("div",{className:"registration-page-container",children:[Object(m.jsxs)("div",{className:"form-container",children:[Object(m.jsxs)("div",{className:"form-row",children:[Object(m.jsx)("label",{htmlFor:"reg-username",children:"username"}),Object(m.jsx)("input",{type:"username",id:"reg-username",onChange:function(e){O(e.target.value)},value:l,disabled:t})]}),Object(m.jsxs)("div",{className:"form-row",children:[Object(m.jsx)("label",{htmlFor:"reg-password",children:"password"}),Object(m.jsx)("input",{type:"password",id:"reg-password",onChange:function(e){v(e.target.value)},value:y})]}),Object(m.jsxs)("div",{className:"form-row",children:[Object(m.jsx)("label",{htmlFor:"reg-restaurant-name",children:"restaurant name"}),Object(m.jsx)("input",{type:"restaurant-name",id:"reg-restaurant-name",onChange:function(e){I(e.target.value)},value:w})]}),Object(m.jsxs)("div",{className:"form-row",children:[Object(m.jsx)("label",{htmlFor:"reg-branch",children:"branch (optional)"}),Object(m.jsx)("input",{type:"branch",id:"reg-branch",onChange:function(e){r(e.target.value)},value:c})]}),Object(m.jsxs)("div",{className:"form-row",children:[Object(m.jsx)("div",{}),Object(m.jsx)("button",{onClick:function(){!function(){if(S(!0),U(""),""===l.trim()||""===y.trim()||""===w.trim())return S(!1),U("Do not leave any items blank");if(y.length<4)return S(!1),U("Password should have at least 4 characters");if(!1===t){var n={username:l.trim(),password:y,restaurantName:w.trim().toLowerCase(),branch:c.trim().toLowerCase()};d.a.post("https://prigider-be.herokuapp.com/api/restaurant",n).then((function(e){S(!1),e.data.error?U(e.data.error):(alert("Account ".concat(l.trim()," has been registered successfully!")),R.push("/login"))}))}else d.a.put("https://prigider-be.herokuapp.com/api/restaurant/".concat(e._id),{password:y,restaurantName:w.trim().toLowerCase(),branch:c.trim().toLowerCase()}).then((function(e){D({type:"UPDATE_RESTAURANT",payload:e.data}),localStorage.setItem("restaurant",JSON.stringify(e.data)),S(!1),alert("Account ".concat(l," has been edited successfully!")),R.push("/")}))}()},children:"Register"})]})]}),Object(m.jsx)("div",{className:"registration-error",children:A})]})]})}),D=function(){var e=Object(b.f)(),t=Object(p.c)();return localStorage.getItem("restaurant")&&t({type:"UPDATE_RESTAURANT",payload:JSON.parse(localStorage.getItem("restaurant"))}),localStorage.getItem("ingredients")&&t({type:"UPDATE_INGREDIENTS",payload:JSON.parse(localStorage.getItem("ingredients"))}),localStorage.getItem("recipes")&&t({type:"UPDATE_RECIPES",payload:JSON.parse(localStorage.getItem("recipes"))}),Object(a.useEffect)((function(){null===localStorage.getItem("restaurant")&&e.push("/login")}),[]),Object(m.jsx)("div",{className:"App",children:Object(m.jsxs)(b.c,{children:[Object(m.jsx)(b.a,{path:"/login",component:U}),Object(m.jsx)(b.a,{path:"/register",component:R}),Object(m.jsx)(g,{children:Object(m.jsxs)(b.c,{children:[Object(m.jsx)(b.a,{path:"/",exact:!0,component:S}),Object(m.jsx)(b.a,{path:"/inventory",component:S}),Object(m.jsx)(b.a,{path:"/recipes",component:w}),Object(m.jsx)(b.a,{path:"/basket",component:T}),Object(m.jsx)(b.a,{path:"/add-ingredient",component:k}),Object(m.jsx)(b.a,{path:"/add-recipe",component:A})]})})]})})},q=n(37),P={editAccount:!1,restaurant:{},ingredients:[],recipes:[],ingredientToEdit:{_id:"",name:"",quantity:0,displayUnit:"gram",density:1,remarks:"",totalCost:0,category:"",location:""},ingredientIsEdit:!1,recipeToEdit:{_id:"",name:"",details:"",recipeIngredients:[],category:"",imageUrl:""},recipeIsEdit:!1,weightUnits:[{name:"gram",conversion:1},{name:"kilogram",conversion:1e3},{name:"milligram",conversion:.001},{name:"ounce",conversion:28.35},{name:"pound",conversion:453.59}],volumeUnits:[{name:"milliliter",conversion:1},{name:"liter",conversion:1e3},{name:"fluid ounce",conversion:29.57},{name:"pint",conversion:473.18},{name:"quart",conversion:946.35},{name:"gallon",conversion:3785.41},{name:"teaspoon",conversion:4.93},{name:"tablespoon",conversion:14.79},{name:"cup",conversion:236.59}],basket:[]},F=function(){var e,t,n,a,i,c,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,s=arguments.length>1?arguments[1]:void 0;switch(s.type){case"EDIT_ACCOUNT":return Object(o.a)(Object(o.a)({},r),{},{editAccount:s.payload});case"UPDATE_RESTAURANT":return Object(o.a)(Object(o.a)({},r),{},{restaurant:Object(o.a)({},s.payload)});case"UPDATE_INGREDIENTS":return Object(o.a)(Object(o.a)({},r),{},{ingredients:Object(x.a)(s.payload)});case"UPDATE_RECIPES":return Object(o.a)(Object(o.a)({},r),{},{recipes:Object(x.a)(s.payload)});case"EDIT_INGREDIENT":return Object(o.a)(Object(o.a)({},r),{},{ingredientToEdit:Object(o.a)({},s.payload),ingredientIsEdit:!0});case"CLEAR_INGREDIENT_EDIT":return Object(o.a)(Object(o.a)({},r),{},{ingredientIsEdit:!1,ingredientToEdit:{_id:"",name:"",quantity:0,displayUnit:"gram",density:1,remarks:"",totalCost:0,category:"",location:""}});case"CONFIRM_EDIT_INGREDIENT":return e=r.ingredients.map((function(e){return e._id===s.payload._id?s.payload:e})),Object(o.a)(Object(o.a)({},r),{},{ingredients:Object(x.a)(e),ingredientIsEdit:!1,ingredientToEdit:{_id:"",name:"",quantity:0,displayUnit:"gram",density:1,remarks:"",totalCost:0,category:"",location:""}});case"EDIT_RECIPE":return Object(o.a)(Object(o.a)({},r),{},{recipeToEdit:Object(o.a)({},s.payload),recipeIsEdit:!0});case"CLEAR_RECIPE_EDIT":return Object(o.a)(Object(o.a)({},r),{},{recipeIsEdit:!1,recipeToEdit:{_id:"",name:"",details:"",recipeIngredients:[],category:"",imageUrl:""}});case"CONFIRM_EDIT_RECIPE":return t=r.recipes.map((function(e){return e._id===s.payload._id?s.payload:e})),Object(o.a)(Object(o.a)({},r),{},{recipes:Object(x.a)(t),recipeIsEdit:!1,recipeToEdit:{_id:"",name:"",details:"",recipeIngredients:[],category:"",imageUrl:""}});case"INCREASE_INVENTORY":return Object(o.a)(Object(o.a)({},r),{},{ingredients:Object(x.a)(r.ingredients.map((function(e){return e._id===s.payload._id?Object(o.a)(Object(o.a)({},e),{},{quantity:e.quantity+s.payload.quantity,totalCost:e.totalCost+s.payload.totalCost}):e})))});case"REDUCE_INVENTORY":var u=r.ingredients.find((function(e){return e._id===s.payload._id})),d=u.quantity-s.payload.quantity,l=u.totalCost-s.payload.quantity*u.totalCost/u.quantity;return d<0&&(d=0),l<0&&(l=0),Object(o.a)(Object(o.a)({},r),{},{ingredients:Object(x.a)(r.ingredients.map((function(e){return e.name===s.payload.ingredientName?Object(o.a)(Object(o.a)({},e),{},{quantity:d,totalCost:l}):e})))});case"ADD_TO_BASKET":return i=s.payload.recipeIngredients,c=Object(x.a)(r.ingredients),i.forEach((function(e){c.map((function(t){return e.ingredient._id===t._id?t.quantity-=e.quantity:t}))})),n=[],n=void 0===r.basket.find((function(e){return e._id===s.payload._id}))?[].concat(Object(x.a)(r.basket),[Object(o.a)(Object(o.a)({},s.payload),{},{itemQuantity:1})]):r.basket.map((function(e){return e._id===s.payload._id?Object(o.a)(Object(o.a)({},e),{},{itemQuantity:e.itemQuantity+1}):e})),Object(o.a)(Object(o.a)({},r),{},{ingredients:c,basket:n});case"SUBTRACT_TO_BASKET":return i=s.payload.recipeIngredients,c=Object(x.a)(r.ingredients),n=Object(x.a)(r.basket),void 0===(a=r.basket.find((function(e){return e._id===s.payload._id})))?Object(o.a)({},r):(i.forEach((function(e){c.map((function(t){return e.ingredient._id===t._id?t.quantity+=e.quantity:t}))})),n=a.itemQuantity<=1?n.filter((function(e){return e._id!==s.payload._id})):r.basket.map((function(e){return e._id===s.payload._id?Object(o.a)(Object(o.a)({},e),{},{itemQuantity:e.itemQuantity-1}):e})),Object(o.a)(Object(o.a)({},r),{},{ingredients:c,basket:n}));case"DELETE_FROM_BASKET":return i=s.payload.recipeIngredients,c=Object(x.a)(r.ingredients),i.forEach((function(e){c.map((function(t){return e.ingredient._id===t._id?t.quantity+=e.quantity*s.payload.itemQuantity:t}))})),Object(o.a)(Object(o.a)({},r),{},{ingredients:c,basket:Object(x.a)(r.basket.filter((function(e){return e._id!==s.payload._id})))});case"EMPTY_BASKET":return"confirm"===s.payload?Object(o.a)(Object(o.a)({},r),{},{basket:[]}):(r.basket.forEach((function(e){i=e.recipeIngredients,c=Object(x.a)(r.ingredients),i.forEach((function(t){c.map((function(n){return t.ingredient._id===n._id?n.quantity+=t.quantity*e.itemQuantity:n}))}))})),Object(o.a)(Object(o.a)({},r),{},{ingredients:c,basket:[]}));default:return r}},L=Object(q.a)(F);r.a.render(Object(m.jsx)(i.a.StrictMode,{children:Object(m.jsx)(C.a,{basename:"/prigider",children:Object(m.jsx)(p.a,{store:L,children:Object(m.jsx)(D,{})})})}),document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.1c3e112b.chunk.js.map